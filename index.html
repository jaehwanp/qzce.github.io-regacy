<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qzce.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="run">
<meta property="og:type" content="website">
<meta property="og:title" content="qzce 개발블로그">
<meta property="og:url" content="http://qzce.github.io/index.html">
<meta property="og:site_name" content="qzce 개발블로그">
<meta property="og:description" content="run">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="qzce">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://qzce.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'ko'
  };
</script>

  <title>qzce 개발블로그</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">qzce 개발블로그</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>태그</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>카테고리</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>아카이브</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/04/20/Spring/spring-security-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/20/Spring/spring-security-1/" class="post-title-link" itemprop="url">[SPRING] spring security</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-04-20 15:46:41" itemprop="dateCreated datePublished" datetime="2023-04-20T15:46:41+09:00">2023-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-04-23 22:45:53" itemprop="dateModified" datetime="2023-04-23T22:45:53+09:00">2023-04-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SPRING-SECURITY"><a href="#SPRING-SECURITY" class="headerlink" title="SPRING SECURITY"></a>SPRING SECURITY</h1><h2 id="인증-API"><a href="#인증-API" class="headerlink" title="인증 API"></a>인증 API</h2><h3 id="Form-인증-순서"><a href="#Form-인증-순서" class="headerlink" title="Form 인증 순서"></a>Form 인증 순서</h3><ol>
<li>Client에서 api 호출했을 때 인증이 안되면 로그인 페이지로 리다이렉트</li>
<li>인증이 되면 session 및 인증 토큰 생성&#x2F;저장</li>
<li>다시 Client에서 api 호출하면 서버에서 세션에 저장된 인증 토큰으로 접근하여 맞는지 확인함</li>
</ol>
<h4 id="정확한-순서"><a href="#정확한-순서" class="headerlink" title="(정확한 순서)"></a>(정확한 순서)</h4><ol>
<li>Client에서 보낸 요청 -&gt; UsernamePasswordAuthenticationFilter 요청정보 매칭 확인</li>
<li>AntPathRequestMatcher(&#x2F;login)<ul>
<li>틀리면 : chain.doFilter</li>
<li>맞다면 : Authentication 에서 인증 처리를 전달</li>
</ul>
</li>
<li>AuthenticationManager 내부에서 AuthenticationProvier에게 인증처리를 위임 <ul>
<li>인증실패 : AuthenticationException을 발생시켜 다시 1번으로 넘어감</li>
<li>인증성공 : AuthenticationManager에서 인증 객체를 4번에 넘겨줌</li>
</ul>
</li>
<li>Authentication 인증객체 만듬 (User정보 + Authorities정보)</li>
<li>SecurityContext (인증 객체 저장소) -&gt; session에 저장</li>
<li>SuccessHandler 호출</li>
</ol>
<h4 id="securityFilterChain-HttpSecurity-http"><a href="#securityFilterChain-HttpSecurity-http" class="headerlink" title="securityFilterChain(HttpSecurity http)"></a>securityFilterChain(HttpSecurity http)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">http</span><br><span class="line">    <span class="comment">// 인가 정책 설정</span></span><br><span class="line">  .authorizeHttpRequests((requests) -&gt; requests      </span><br><span class="line">    .requestMatchers(<span class="string">&quot;/&quot;</span>).permitAll() <span class="comment">// 해당 url은 로그인 없이 접근가능</span></span><br><span class="line">    .anyRequest().authenticated() <span class="comment">// 위 url 제외 모두 인증 필요</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 로그인 기능</span></span><br><span class="line">  .formLogin((form) - &gt; form</span><br><span class="line">    .loginPage()  <span class="comment">// 사용자 정의 로그인 페이지</span></span><br><span class="line">    .usernameParameter() <span class="comment">// 아이디 파라미터명</span></span><br><span class="line">    .passwordParameter() <span class="comment">// 패스워드 파라미터명</span></span><br><span class="line">    .failureForwardUrl() <span class="comment">// 로그인 실패 후 포워딩 경로</span></span><br><span class="line">    .successForwardUrl() <span class="comment">// 로그인 성공 후 포워딩 경로</span></span><br><span class="line">    .failureUrl() <span class="comment">// 로그인 실패 후 이동 페이지</span></span><br><span class="line">    .successUrl() <span class="comment">// 로그인 성공 후 이동 페이지</span></span><br><span class="line">    .loginProcessingUrl() <span class="comment">// submit url</span></span><br><span class="line">    .successHandler() <span class="comment">// 로그인 성공 후 핸들러</span></span><br><span class="line">    .failureHandler() <span class="comment">// 로그인 실패 후 핸들러</span></span><br><span class="line">  )</span><br><span class="line">    <span class="comment">// 로그아웃 기능</span></span><br><span class="line">  .logout((logout) -&gt; logout</span><br><span class="line">    .logoutUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    .logoutSuccessUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    .deleteCookies(<span class="string">&quot;cookie name&quot;</span>)    <span class="comment">// 쿠키 제거</span></span><br><span class="line">    .addLogoutHandler(logoutHandler())</span><br><span class="line">    .logoutSuccessHandler(logoutSuccessHandler())</span><br><span class="line">  )</span><br><span class="line">    <span class="comment">// remember me (쿠키) 세션이 만료되어도 어플리케이션이 사용자를 기억하는 기능</span></span><br><span class="line">  .rememberMe((rememberMe) -&gt; rememberMe</span><br><span class="line">    .rememberMeParameter(<span class="string">&quot;&quot;</span>)  <span class="comment">// 파라미터명 설정</span></span><br><span class="line">    .tokenValiditySeconds(<span class="number">3600</span>) <span class="comment">// 토큰 유효기간</span></span><br><span class="line">    .alwaysRemember(<span class="literal">false</span>)  <span class="comment">// true : 체크 안해도 기억</span></span><br><span class="line">    .userDetailsService() </span><br><span class="line">  )</span><br><span class="line">    <span class="comment">// 동시 세션 제어</span></span><br><span class="line">  .sessionManagement()</span><br><span class="line">    .sessionFixation().changeSessionId() <span class="comment">// 세션 고정 보호 (none, migrateSession, newSession)</span></span><br><span class="line">    .maximumSessions(<span class="number">1</span>)  <span class="comment">// 최대 허용 가능 세션</span></span><br><span class="line">    .maxSessionsPreventsLogin(<span class="literal">false</span>) <span class="comment">// true : 현재 사용자 인증 실패 , false : 이전 사용자 세션 만료</span></span><br><span class="line">    .expiredUrl(<span class="string">&quot;/&quot;</span>)    <span class="comment">// 세션이 만료된 경우 이동할 페이지</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// exceptionHandling</span></span><br><span class="line">  .exceptionHandling((exceptHandler) -&gt; exceptHandler</span><br><span class="line">      .authenticationEntryPoint(<span class="keyword">new</span> <span class="title class_">AuthenticationEntryPoint</span>() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">              response.sendRedirect(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .accessDeniedHandler(<span class="keyword">new</span> <span class="title class_">AccessDeniedHandler</span>() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">              response.sendRedirect(<span class="string">&quot;/denied&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  )</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="remember-me-인증"><a href="#remember-me-인증" class="headerlink" title="remember me 인증"></a>remember me 인증</h3><ol>
<li>client rememberme 쿠키를 가지고 있음</li>
<li>RememberMeAuthenticationFilter (null check)</li>
<li>TokenBasedRememberMeServices, PersistentTokenBasedRememberMeServices(DB에 저장) 구현체</li>
<li>RememberMeServices에서 Token Cookie 추출<ul>
<li>token 없애 : chain.doFilter -&gt; Exception</li>
<li>token 존재 : 토큰 정상 유무 판단 (토큰 서로 일치?, DB에 user 계정 존재?) -&gt; 새로운 Authentication 생성</li>
</ul>
</li>
</ol>
<h3 id="AnonymousAuthenticationFilter"><a href="#AnonymousAuthenticationFilter" class="headerlink" title="AnonymousAuthenticationFilter"></a>AnonymousAuthenticationFilter</h3><p>익명사용자, 인증 사용자 구분해서 처리<br>security context 안에 인증객체 여부 판단</p>
<h2 id="동시-세션-제어"><a href="#동시-세션-제어" class="headerlink" title="동시 세션 제어"></a>동시 세션 제어</h2><p>최대 세션 허용 개수 초과</p>
<p>(A,B 사용자는 같은 계정)</p>
<ol>
<li>이전 사용자 세션 만료 <ol>
<li>A 사용자 로그인 (세션 생성)</li>
<li>B 사용자 로그인 (세션 생성 및 이전 사용자 세션 만료)</li>
<li>A 사용자 링크 접속 -&gt; A 사용자 세션 만료</li>
</ol>
</li>
<li>현재 사용자 인증 실패<ol>
<li>A 사용자 로그인 (세션 생성)</li>
<li>B 사용자 로그인 (인증 예외)</li>
</ol>
</li>
</ol>
<h3 id="ConcurrentSessionFilter"><a href="#ConcurrentSessionFilter" class="headerlink" title="ConcurrentSessionFilter"></a>ConcurrentSessionFilter</h3><p>매 요청 마다 현재 사용자의 세션 만료 여부 체크<br>세션이 만료되었을 경우 즉시 만료 처리</p>
<h2 id="권한-설정"><a href="#권한-설정" class="headerlink" title="권한 설정"></a>권한 설정</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">http</span><br><span class="line">  .authorizeHttpRequests((requests) -&gt; requests       <span class="comment">// 인가 정책</span></span><br><span class="line">    .requestMatchers(<span class="string">&quot;/&quot;</span>).permitAll()</span><br><span class="line">    .requestMatchers(<span class="string">&quot;/mypage/info&quot;</span>).hasRole(<span class="string">&quot;USER&quot;</span>)</span><br><span class="line">    .requestMatchers(<span class="string">&quot;/mypage/**&quot;</span>).hasRole(<span class="string">&quot;USER&quot;</span>)</span><br><span class="line">    .requestMatchers(<span class="string">&quot;/admin/info&quot;</span>).access(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">WebExpressionAuthorizationManager</span>(</span><br><span class="line">                    <span class="string">&quot;hasRole(&#x27;ADMIN&#x27;) and hasRole(&#x27;SYS&#x27;)&quot;</span></span><br><span class="line">            )</span><br><span class="line">    )</span><br><span class="line">    .requestMatchers(<span class="string">&quot;/admin/**&quot;</span>).hasRole(<span class="string">&quot;ADMIN&quot;</span>)</span><br><span class="line">    .anyRequest().authenticated()</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<h3 id="ExeptionTranslationFilter"><a href="#ExeptionTranslationFilter" class="headerlink" title="ExeptionTranslationFilter"></a>ExeptionTranslationFilter</h3><ul>
<li>AuthenticationException<ul>
<li>인증 예외 처리<ul>
<li>AuthenticationEntryPoint 호출 : RequestCache (세션에 저장된 사용자 요청 정보를 꺼내옴 [SaveRequest : 파라미터, 헤더값 저장])</li>
<li>인증 예외가 발생하기 전의 요청 정보를 저장</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="CsrfFilter-사이트-간-요청-위조"><a href="#CsrfFilter-사이트-간-요청-위조" class="headerlink" title="CsrfFilter (사이트 간 요청 위조)"></a>CsrfFilter (사이트 간 요청 위조)</h3><ul>
<li>모든 요청에 랜덤하게 생성된 토큰을 http 파라미터로 요구</li>
<li>요청 시 전달되는 토큰 값과 서버에 저장된 실제 값과 비교한 후 만약 일치하지 않으면 요청은 실패</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">                .authorizeHttpRequests((requests) -&gt; requests       <span class="comment">// 인가 정책</span></span><br><span class="line"><span class="comment">//                        .requestMatchers(&quot;/login&quot;).permitAll()</span></span><br><span class="line"><span class="comment">//                        .requestMatchers(&quot;/mypage/**&quot;).hasRole(&quot;USER&quot;)</span></span><br><span class="line"><span class="comment">//                        .requestMatchers(&quot;/admin/pay&quot;).hasRole(&quot;ADMIN&quot;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                        .requestMatchers(&quot;/admin/**&quot;).access(</span></span><br><span class="line"><span class="comment">//                                new WebExpressionAuthorizationManager(</span></span><br><span class="line"><span class="comment">//                                        &quot;hasRole(&#x27;ADMIN&#x27;) and hasRole(&#x27;SYS&#x27;)&quot;</span></span><br><span class="line"><span class="comment">//                                )</span></span><br><span class="line"><span class="comment">//                        )</span></span><br><span class="line"></span><br><span class="line">                        .anyRequest().authenticated()</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                <span class="comment">// login</span></span><br><span class="line">                .formLogin((form) -&gt; form</span><br><span class="line"><span class="comment">//                        .loginPage(&quot;/login&quot;)            // 사용자 정의 페이지</span></span><br><span class="line">                        .defaultSuccessUrl(<span class="string">&quot;/&quot;</span>)         <span class="comment">// 로그인 성공 후 페이지</span></span><br><span class="line">                        .failureUrl(<span class="string">&quot;/login&quot;</span>)           <span class="comment">// 로그인 실패 후 페이지</span></span><br><span class="line">                        .usernameParameter(<span class="string">&quot;userId&quot;</span>)</span><br><span class="line">                        .passwordParameter(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">                        .loginProcessingUrl(<span class="string">&quot;/loginProc&quot;</span>)</span><br><span class="line">                        .successHandler(<span class="keyword">new</span> <span class="title class_">AuthenticationSuccessHandler</span>() &#123;   <span class="comment">// 로그인 성공 후 핸들러</span></span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAuthenticationSuccess</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">                                <span class="type">RequestCache</span> <span class="variable">requestCache</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpSessionRequestCache</span>();</span><br><span class="line">                                <span class="type">SavedRequest</span> <span class="variable">savedRequest</span> <span class="operator">=</span> requestCache.getRequest(request, response);</span><br><span class="line">                                <span class="type">String</span> <span class="variable">redirectUrl</span> <span class="operator">=</span> savedRequest.getRedirectUrl();</span><br><span class="line">                                response.sendRedirect(redirectUrl);</span><br><span class="line"><span class="comment">//                                System.out.println(&quot;Authentication&quot; + authentication.getName());</span></span><br><span class="line"><span class="comment">//                                response.sendRedirect(&quot;/&quot;);</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .failureHandler(<span class="keyword">new</span> <span class="title class_">AuthenticationFailureHandler</span>() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAuthenticationFailure</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">                                System.out.println(<span class="string">&quot;exception&quot;</span> + exception.getMessage());</span><br><span class="line">                                response.sendRedirect(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .permitAll()</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                <span class="comment">// logout</span></span><br><span class="line">                .logout((logout) -&gt; logout</span><br><span class="line">                        .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">                        .logoutSuccessUrl(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                        .addLogoutHandler(<span class="keyword">new</span> <span class="title class_">LogoutHandler</span>() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logout</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Authentication authentication)</span> &#123;</span><br><span class="line">                                <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">                                session.invalidate();   <span class="comment">// 세션 무효화</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .logoutSuccessHandler(<span class="keyword">new</span> <span class="title class_">LogoutSuccessHandler</span>() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLogoutSuccess</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">                                response.sendRedirect(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .deleteCookies(<span class="string">&quot;remember-me&quot;</span>)</span><br><span class="line">                        .permitAll())</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 예외처리 기능</span></span><br><span class="line">                .exceptionHandling((exceptHandler) -&gt; exceptHandler</span><br><span class="line">                        .authenticationEntryPoint(<span class="keyword">new</span> <span class="title class_">AuthenticationEntryPoint</span>() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">                                response.sendRedirect(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .accessDeniedHandler(<span class="keyword">new</span> <span class="title class_">AccessDeniedHandler</span>() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">                                response.sendRedirect(<span class="string">&quot;/denied&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">// remember me</span></span><br><span class="line">                .rememberMe((rememberMe) -&gt; rememberMe</span><br><span class="line">                        .rememberMeParameter(<span class="string">&quot;remember&quot;</span>)</span><br><span class="line">                        .tokenValiditySeconds(<span class="number">3600</span>) <span class="comment">// 1시간</span></span><br><span class="line">                        .userDetailsService(userDetailsService)</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 세션 관리</span></span><br><span class="line">                .sessionManagement((sm) -&gt; sm</span><br><span class="line">                    .sessionFixation().changeSessionId()    <span class="comment">// 세션 고정 보호 (기본값 changeSessionId)</span></span><br><span class="line">                    .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED) <span class="comment">// 세션 관리 기능 (stateless -&gt; jwt 할떄 사용)</span></span><br><span class="line">                    .maximumSessions(<span class="number">1</span>)  <span class="comment">// 최대 허용 가능 세션</span></span><br><span class="line">                    .maxSessionsPreventsLogin(<span class="literal">false</span>) <span class="comment">// true : 현재 사용자 인증 실패 , false : 이전 사용자 세션 만료</span></span><br><span class="line">                    .expiredUrl(<span class="string">&quot;/&quot;</span>)    <span class="comment">// 세션이 만료된 경우 이동할 페이지</span></span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/04/06/Spring/spring-detail-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/06/Spring/spring-detail-3/" class="post-title-link" itemprop="url">[SPRING] AOP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>
              

              <time title="Post created: 2023-04-06 16:48:53 / Updated at: 20:49:42" itemprop="dateCreated datePublished" datetime="2023-04-06T16:48:53+09:00">2023-04-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-AOP"><a href="#1-AOP" class="headerlink" title="1. AOP"></a>1. AOP</h1><p>관점지향 프로그래밍 (Aspect Oriented Programming)</p>
<p>프로그램의 여러 부분에서 반복적으로 사용되는 공통 로직을 분리하여 한 곳에서 관리</p>
<h3 id="dependency"><a href="#dependency" class="headerlink" title="dependency"></a>dependency</h3><p>dependency 추가하여 사용</p>
<p>pom.xml (maven)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>&#123;spring version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>build.gradle (gradle)</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;org.springframework:spring-aop&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="2-용어-설명"><a href="#2-용어-설명" class="headerlink" title="2. 용어 설명"></a>2. 용어 설명</h1><ol>
<li><p>Aspect</p>
<ul>
<li>advice 메서드 결정</li>
</ul>
</li>
<li><p>pointcut</p>
<ul>
<li>advice가 적용될 joinpoint를 정의</li>
</ul>
</li>
<li><p>joinpoint</p>
<ul>
<li>프로그램 실행 중 특정 지점</li>
<li>(실행시점 or 예외 발생 시점)</li>
</ul>
</li>
<li><p>advice</p>
<ul>
<li>joinpoint에 삽입되어 동작하는 코드</li>
</ul>
</li>
<li><p>weaving</p>
<ul>
<li>aspect를 실제 코드에 적용하는 과정</li>
</ul>
</li>
</ol>
<h3 id="advice-종류"><a href="#advice-종류" class="headerlink" title="advice 종류"></a>advice 종류</h3><ol>
<li>Before : 메서드 실행 전 실행</li>
<li>After : 메서드 실행 후 실행</li>
<li>AfterReturning : 메서드가 성공적으로 완료된 뒤 실행</li>
<li>AfterThrowing : 메서드 에러발생시 실행</li>
<li>Around : 위에 모든 시점에서 실행</li>
</ol>
<h1 id="3-예시"><a href="#3-예시" class="headerlink" title="3. 예시"></a>3. 예시</h1><p>UserService에서 addUser() 호출시 자동으로 로그 남겨주는 예시</p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 사용자 추가 로직</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>addUser()</strong> 메서드는 joinPoint가 된다.<br>(아래 <strong>LoggingAspect</strong> 클래스에서 <em>execution(* com.qzce.service.UserService.addUser(..))</em> 으로 등록함)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingAspect</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(LoggingAspect.class);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// addUser() 실행 전 동작</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.qzce.service.UserService.addUser(..)) &amp;&amp; args(user)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logBeforeAddUser</span><span class="params">(JoinPoint joinPoint, User user)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Before &quot;</span> + joinPoint.getSignature().getName() + <span class="string">&quot; method called with user: &quot;</span> + user.toString());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// addUser() 정상실행 후 동작</span></span><br><span class="line">    <span class="meta">@AfterReturning(pointcut = &quot;execution(* com.qzce.service.UserService.addUser(..))&quot;, returning = &quot;result&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logAfterReturningAddUser</span><span class="params">(JoinPoint joinPoint, Object result)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;After &quot;</span> + joinPoint.getSignature().getName() + <span class="string">&quot; method returned: &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JoinPoint 객체는 Advice가 적용되는 메소드와 관련된 정보를 제공하기 때문에, Advice 구현 시 JoinPoint 객체를 이용해 해당 메소드와 관련된 정보를 가져와 로깅 등의 기능을 구현할 수 있다.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/03/28/aws-how-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/28/aws-how-1/" class="post-title-link" itemprop="url">[AWS] AWS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-03-28 18:12:36" itemprop="dateCreated datePublished" datetime="2023-03-28T18:12:36+09:00">2023-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-03-30 22:21:15" itemprop="dateModified" datetime="2023-03-30T22:21:15+09:00">2023-03-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AWS/" itemprop="url" rel="index"><span itemprop="name">AWS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="인스턴스-설정-free-tier"><a href="#인스턴스-설정-free-tier" class="headerlink" title="인스턴스 설정 (free tier)"></a>인스턴스 설정 (free tier)</h2><p>AWS 콘솔에서 인스턴스 시작 버튼을 누름</p>
<ol>
<li>원하는 이름, 원하는 OS를 설정.</li>
</ol>
<img width="709" alt="image" src="https://user-images.githubusercontent.com/45479802/228190970-8aad6aea-600e-4117-9069-aa0337245057.png">

<ol start="2">
<li>키페어 생성</li>
</ol>
<img width="540" alt="image" src="https://user-images.githubusercontent.com/45479802/228192010-3475ac4b-49b9-4f44-8968-04587162a2f1.png">

<ol start="3">
<li>네트워크 설정</li>
</ol>
<p>모든 IP에서 들어갈 수있게 SSH트래픽허용 (0.0.0.0&#x2F;0)으로 설정함</p>
<hr>
<p>주의사항</p>
<p>12개월 후 돈내야함</p>
<p>(다시 ec2 만들어서 배포하면 가능)</p>
<blockquote>
<p>프리 티어: 첫 해에는 월별 프리 티어 AMI에 대한 t2.micro(또는 t2.micro를 사용할 수 없는 리전의 t3.micro) 인스턴스 사용량 750시간, EBS 스토리지 30GiB, IO 2백만 개, 스냅샷 1GB, 인터넷 대역폭 100GB가 포함됩니다.</p>
</blockquote>
<hr>
<h2 id="에러"><a href="#에러" class="headerlink" title="에러"></a>에러</h2><p>(Load key “***.pem”: Operation not permitted)</p>
<img width="436" alt="image" src="https://user-images.githubusercontent.com/45479802/228750675-5e6cfa9c-4344-42c4-a219-d03dd87c94d6.png">


<img width="827" alt="image" src="https://user-images.githubusercontent.com/45479802/228751090-13d3ab86-672e-4be4-ba05-043ac7355f43.png">

<p>설정 &gt; 개인정보 보안 및 보안 &gt; 전체 디스크 접근 권한</p>
<img width="827" alt="image" src="https://user-images.githubusercontent.com/45479802/228751375-30d3ed1a-6211-4865-968b-a22014d161fe.png">

<p>터미널을 체크한다.</p>
<p><img src="https://user-images.githubusercontent.com/45479802/228805165-b3d56966-e4d4-47d1-9b28-1863afe4a10b.png" alt="image"></p>
<p>연결 완료 화면</p>
<hr>
<h2 id="docker-설치-및-설정"><a href="#docker-설치-및-설정" class="headerlink" title="docker 설치 및 설정"></a>docker 설치 및 설정</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum package update</span></span><br><span class="line">$ sudo yum -y update</span><br><span class="line"></span><br><span class="line"><span class="comment"># install docker</span></span><br><span class="line">$ sudo yum install docker -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># check docker version</span></span><br><span class="line">$ docker -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># start docker service</span></span><br><span class="line">$ sudo service docker start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 파일 권한 변경 (docker 서비스시 필요)</span></span><br><span class="line">$ sudo <span class="built_in">chmod</span> 666 /var/run/docker.sock</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>-y : 설치과정의 모든 질문을 yes로 입력</p>
<hr>
<h2 id="jdk-설치"><a href="#jdk-설치" class="headerlink" title="jdk 설치"></a>jdk 설치</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># intallable java version</span></span><br><span class="line">$ yum search java*</span><br><span class="line"></span><br><span class="line"><span class="comment"># install java</span></span><br><span class="line">$ sudo yum install java-11-amazon-corretto.x86_64 -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># check the java version</span></span><br><span class="line">$ java -version</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/45479802/228798320-b1b63c1f-58ac-4abb-92da-0dd961b05b3e.png" alt="image"></p>
<img alt="image" src="https://user-images.githubusercontent.com/45479802/228798998-01fca39f-5f18-4c1a-8fa2-028c5778822e.png">



<hr>
<h2 id="DB"><a href="#DB" class="headerlink" title="DB"></a>DB</h2><p>DB : mariadb</p>
<p>왠만해서는 RDS 쓰는게 좋지만 가벼운 테스트 프로젝트이므로 docker 내 db를 설치함.</p>
<h3 id="docker-volume"><a href="#docker-volume" class="headerlink" title="docker volume"></a>docker volume</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker volume 생성</span></span><br><span class="line"><span class="comment"># sudo docker volume create [volume명]</span></span><br><span class="line">$ sudo docker volume create mariadb-vol</span><br></pre></td></tr></table></figure>
<details>
<summary>docker volume 명령어</summary>
<div markdown="1">

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker volume 조회</span></span><br><span class="line">$ docker volume <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 해당 볼륨 자세한 정보</span></span><br><span class="line">$ docker volume inspect [volume명]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 제거</span></span><br><span class="line">$ docker volume <span class="built_in">rm</span> [volume명]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 사용하지않는 모든 로컬 볼륨 삭제</span></span><br><span class="line">$ docker volume prune</span><br></pre></td></tr></table></figure>


</div>
</details>

<h3 id="docker-내-DB-이미지-불러오기"><a href="#docker-내-DB-이미지-불러오기" class="headerlink" title="docker 내 DB 이미지 불러오기"></a>docker 내 DB 이미지 불러오기</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mariadb 설치</span></span><br><span class="line">$ docker pull mariadb/server:latest</span><br><span class="line"></span><br><span class="line">$ docker images</span><br></pre></td></tr></table></figure>
<img width="514" alt="스크린샷 2023-03-30 오후 7 32 21" src="https://user-images.githubusercontent.com/45479802/228809684-e273f64c-cff5-4c18-a8f6-0f9a9046e85e.png">

<h3 id="docker-컨테이너-마운트"><a href="#docker-컨테이너-마운트" class="headerlink" title="docker 컨테이너 마운트"></a>docker 컨테이너 마운트</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mount</span></span><br><span class="line"><span class="comment"># docker run --name [container명] -e MARIADB_ROOT_PASSWORD=[DB비번] -d -p [ec2 port]:[docker port] mariadb:latest</span></span><br><span class="line">$ docker run --name mariadb_cont -e MARIADB_ROOT_PASSWORD=1234 -d -p 3306:3306 mariadb:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># container list</span></span><br><span class="line">$ docker ps</span><br></pre></td></tr></table></figure>

<h3 id="외부-DB-tool-연결"><a href="#외부-DB-tool-연결" class="headerlink" title="외부 DB tool 연결"></a>외부 DB tool 연결</h3><img width="894" alt="image" src="https://user-images.githubusercontent.com/45479802/228844197-f0af6672-cae9-41f1-8800-0ecd17da78a2.png">
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/02/01/Spring/spring-detail-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/01/Spring/spring-detail-2/" class="post-title-link" itemprop="url">[SPRING] JPA (spring-data-jpa)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-02-01 09:00:00" itemprop="dateCreated datePublished" datetime="2023-02-01T09:00:00+09:00">2023-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-02-27 16:35:03" itemprop="dateModified" datetime="2023-02-27T16:35:03+09:00">2023-02-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JPA"><a href="#JPA" class="headerlink" title="JPA"></a>JPA</h1><p>Java Persistence API</p>
<p>자바에서 데이터베이스를 조작하고 관리하는 기능을 제공하는 인터페이스</p>
<p>객체-관계 매핑(ORM) 구현하는 기술</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Spring-data-jpa</a></p>
<h2 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h2><p>객체 지향 언어로 작성된 애플리케이션과 관계형 데이터 베이스 간의 데이터 매핑을 자동으로 처리해주는 오픈소스 프레임 워크</p>
<p>객체 지향 언어 : 클래스, 객체 사용</p>
<p>관계형 데이터베이스 : 테이블, 관계 사용</p>
<p>-&gt; 객체 지향 모델과 관계형 데이터베이스 모델 간의 차이점을 해결할 수 있음</p>
<p>자동으로 해주니 편함.</p>
<h2 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h2><p>JPA 구현체 중 하나로, ORM 프레임 워크</p>
<h3 id="One-To-Many"><a href="#One-To-Many" class="headerlink" title="One-To-Many"></a>One-To-Many</h3><h4 id="예제"><a href="#예제" class="headerlink" title="예제"></a>예제</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToMany(cascade = CascadeType.ALL)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;order_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; items = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderItem</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>cascade 속성을 이용</p>
<h3 id="Many-To-One"><a href="#Many-To-One" class="headerlink" title="Many-To-One"></a>Many-To-One</h3><h4 id="예제-1"><a href="#예제-1" class="headerlink" title="예제"></a>예제</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToMany(mappedBy = &quot;order&quot;, cascade = CascadeType.ALL)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; orderItems = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderItem</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">  	<span class="meta">@JoinColumn(name = &quot;order_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Order order;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Many-To-Many"><a href="#Many-To-Many" class="headerlink" title="Many-To-Many"></a>Many-To-Many</h3><h4 id="예제-2"><a href="#예제-2" class="headerlink" title="예제"></a>예제</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToMany</span></span><br><span class="line">	<span class="meta">@JoinTable(name = &quot;book_author&quot;,</span></span><br><span class="line"><span class="meta">			joinColumns = @JoinColumn(name = &quot;book_id&quot;)</span></span><br><span class="line"><span class="meta">			inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;))</span>		</span><br><span class="line">  <span class="keyword">private</span> List&lt;Author&gt; authors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Author</span> &#123;</span><br><span class="line">  <span class="meta">@Id</span></span><br><span class="line">  <span class="keyword">private</span> Long id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@ManyToMany(mappedBy = &quot;authors&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;Book&gt; books = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>@JoinTable 어노테이션을 이용하여 연결 테이블의 각각의 열을 지정</p>
<p>@JoinTable의 속성에서 joinColumns 는 현재 엔티티(book)의 식별자를, inverseJoinColumns 는 연관 엔티티(Author)의 식별자를 가리킴</p>
<p>@ManyToMany 어노테이션으로 각 엔티티의 연결을 표시함</p>
<h4 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h4><p>JPA는 ‘book_author’ 테이블을 생성하고 book_id 와 author_id 열을 포함하여 두 엔티티 간의 관계를 유지함</p>
<p>각 엔티티를 조회하고 수정할 때 각 List 필드를 사용하여 Many-To-Many 관계를 유지함</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/01/19/Spring/spring-detail-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/19/Spring/spring-detail-1/" class="post-title-link" itemprop="url">[SPRING] Spring framework</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-01-19 12:11:24" itemprop="dateCreated datePublished" datetime="2023-01-19T12:11:24+09:00">2023-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-02-16 21:03:54" itemprop="dateModified" datetime="2023-02-16T21:03:54+09:00">2023-02-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="SPRING"><a href="#SPRING" class="headerlink" title="SPRING"></a>SPRING</h2><h3 id="spring-framework란"><a href="#spring-framework란" class="headerlink" title="spring framework란?"></a>spring framework란?</h3><p>스프링 프레임워크(영어: Spring Framework)는 자바 플랫폼을 위한 오픈 소스 애플리케이션 프레임워크로서 간단히 스프링(Spring)이라고도 한다. 동적인 웹 사이트를 개발하기 위한 여러 가지 서비스를 제공하고 있다.</p>
<p>개발자가 편리하게 프로그램을 개발할 수 있도록 갖춰진 구조</p>
<h3 id="spring의-사용이유"><a href="#spring의-사용이유" class="headerlink" title="spring의 사용이유"></a>spring의 사용이유</h3><ul>
<li>생산성 향상 : 자주 사용되는 기능을 라이브러리 형태로 제공하고 있어서 구현에 시간이 많이 들지 않음</li>
<li>모듈화 : 독립적인 모듈로 이루어져 있어, 필요한 모듈만 가져와서 사용가능</li>
<li>유지보수 높음 : 객체 지향 프로그래밍 기반으로 코드의 유지보수성 증가, AOP(Aspect-Oriented Programming) 지원하여 핵심 로직과 부가적인 기능을 분리해서 관리</li>
<li>안정성 : 테스트 프레임워크와 통합되어있어서 테스트가 쉽고, 다양한 보안 기능 제공하여 안정성이 높아짐</li>
</ul>
<h3 id="Spring-모듈"><a href="#Spring-모듈" class="headerlink" title="Spring 모듈"></a>Spring 모듈</h3><p><img src="https://user-images.githubusercontent.com/45479802/219313465-726e0a68-9d4b-4034-9f86-f93b618ec763.png" alt="image"></p>
<ul>
<li><p>DAO</p>
<p>JDBC 추상 계층 제공, 데이터가 담겨있는 VO 클래스를 사용</p>
</li>
<li><p>ORM</p>
<p>JPA, Hibernate와 같은 ORM이나 MyBatis같은 데이터베이스 API 등과 통합할 수 있는 기능 제공</p>
</li>
<li><p>AOP</p>
<p>Aspect-Oriented Programming을 지원하는 모듈.</p>
<p>핵심 로직과 부가적인 기능을 분리하여 관리할 수 있고, 트랜잭션, 로깅, 보안 등 다양한 기능 제공</p>
</li>
<li><p>JEE</p>
</li>
<li><p>Web</p>
</li>
<li><p>Core</p>
<p>IoC(제어역전), DI(의존성주입) 기능 제공 (코드의 결합도를 낮추고 코드의 유지보수성이 높아짐)</p>
<ul>
<li>IoC (Inversion of Control) : 객체 생성과 관리를 개발자가 아닌 프레임워크가 담당함</li>
<li>DI (Dependency Injection) : 객체간 의존성을 자동으로 주입함</li>
<li>IoC와 DI 차이점<ul>
<li>IoC와 DI의 차이점은 IoC는 객체 생성과 관리에 대한 제어권을 프레임워크에게 넘기는 것이고, DI는 객체간 의존성을 자동으로 주입하는 것입니다. 둘은 밀접한 관련이 있으며, Spring Framework에서는 IoC 컨테이너를 통해 객체의 생명주기와 의존성을 관리하며, DI를 구현합니다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h2><p>Model - View - Controller 패턴</p>
<table>
<thead>
<tr>
<th align="left">패턴</th>
<th align="left">내용</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Model</td>
<td align="left">비즈니스 로직을 담당하는 컴포넌트로 데이터 생성, 저장, 검색 역할 수행 (POJO 클래스를 이용하여 구현)</td>
</tr>
<tr>
<td align="left">View</td>
<td align="left">사용자 인터페이스 담당</td>
</tr>
<tr>
<td align="left">Controller</td>
<td align="left">Model, View를 연결, 사용자의 요청을 처리하고 결과를 View에 전달</td>
</tr>
</tbody></table>
<p>Spring에서는 DispatcherServlet을 이용하여 MVC패턴을 구현함</p>
<blockquote>
<p> 클라이언트 요청 -&gt; DispathcherServlet 에 도달 -&gt; 해당 요청을 처리할 Controller를 선택 -&gt; Controller에서 Model 생성 및 View 연결 -&gt; 결과반환</p>
</blockquote>
<h2 id="Bean"><a href="#Bean" class="headerlink" title="Bean"></a>Bean</h2><p>Spring IoC 컨테이너에 의해 생성되어 관리되는 객체 </p>
<p>싱글톤 패턴(객체의 인스턴스가 오직 1개만 생성되는 패턴)을 기본으로 사용 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/01/12/Spring/spring-board-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/12/Spring/spring-board-5/" class="post-title-link" itemprop="url">[SPRING] SPRING BOOT + REST API + JPA 게시판(5) - Controller (with Talend API)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-01-12 18:31:14" itemprop="dateCreated datePublished" datetime="2023-01-12T18:31:14+09:00">2023-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-01-18 20:45:17" itemprop="dateModified" datetime="2023-01-18T20:45:17+09:00">2023-01-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/v1/board&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BoardController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BoardService boardService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity <span class="title function_">boardAll</span><span class="params">(<span class="meta">@PageableDefault(size=5, sort = &quot;bid&quot;)</span> Pageable pageable)</span> &#123;</span><br><span class="line"></span><br><span class="line">        Page&lt;Board&gt; list = boardService.boardList(pageable);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>(list, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;bid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity <span class="title function_">boardDetail</span><span class="params">(<span class="meta">@PathVariable(&quot;bid&quot;)</span> Long bid)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Board</span> <span class="variable">board</span> <span class="operator">=</span> boardService.boardView(bid);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>(board, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity <span class="title function_">boardWrite</span><span class="params">(<span class="meta">@RequestBody</span> BoardWriteDto boardWriteDto)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Board</span> <span class="variable">board</span> <span class="operator">=</span> boardService.boardSave(boardWriteDto);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>(board, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity <span class="title function_">boardUpdate</span><span class="params">(<span class="meta">@RequestBody</span> BoardWriteDto boardWriteDto)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Board</span> <span class="variable">board</span> <span class="operator">=</span> boardService.boardSave(boardWriteDto);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>(board, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;bid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity <span class="title function_">boardDelete</span><span class="params">(<span class="meta">@PathVariable(&quot;bid&quot;)</span> Long bid)</span> &#123;</span><br><span class="line"></span><br><span class="line">        boardService.boardDelete(bid);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>(<span class="string">&quot;Delete post&quot;</span> ,HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="talend-Api"><a href="#talend-Api" class="headerlink" title="talend Api"></a>talend Api</h2><p>…</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/01/12/Spring/spring-board-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/12/Spring/spring-board-4/" class="post-title-link" itemprop="url">[SPRING] SPRING BOOT + REST API + JPA 게시판(4) - Service</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>
              

              <time title="Post created: 2023-01-12 14:28:34 / Updated at: 18:31:33" itemprop="dateCreated datePublished" datetime="2023-01-12T14:28:34+09:00">2023-01-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BoardService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BoardRepository boardRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Page&lt;Board&gt; <span class="title function_">boardList</span><span class="params">(Pageable pageable)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> boardRepository.findAll(pageable);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Board <span class="title function_">boardView</span><span class="params">(Long bid)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> boardRepository.findById(bid)</span><br><span class="line">                .orElseThrow(IllegalAccessError::<span class="keyword">new</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> Board <span class="title function_">boardSave</span><span class="params">(BoardWriteDto boardWriteDto)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> boardRepository.save(boardWriteDto.toEntity());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">boardDelete</span><span class="params">(Long bid)</span> &#123;</span><br><span class="line">        boardRepository.deleteById(bid);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/01/07/Spring/spring-board-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/07/Spring/spring-board-3/" class="post-title-link" itemprop="url">[SPRING] SPRING BOOT + REST API + JPA 게시판(3) - Repository</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-01-07 18:30:43" itemprop="dateCreated datePublished" datetime="2023-01-07T18:30:43+09:00">2023-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-01-12 18:26:52" itemprop="dateModified" datetime="2023-01-12T18:26:52+09:00">2023-01-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BoardRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Board, Long&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JpaRepository를 상속받는다</p>
<h2 id="RepositoryTest"><a href="#RepositoryTest" class="headerlink" title="RepositoryTest"></a>RepositoryTest</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DataJpaTest</span></span><br><span class="line"><span class="meta">@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BoardRepositoryTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BoardRepository boardRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Board newBoard;</span><br><span class="line">    <span class="keyword">private</span> Long boardCount;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        boardCount = boardRepository.count();</span><br><span class="line"></span><br><span class="line">        newBoard = boardRepository.save(</span><br><span class="line">                Board.builder().title(<span class="string">&quot;testTitle&quot;</span>).content(<span class="string">&quot;testContent&quot;</span>)</span><br><span class="line">                        .build());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> 게시글_조회() &#123;</span><br><span class="line">        Optional&lt;Board&gt; board = boardRepository.findById(newBoard.getBid());</span><br><span class="line">        Assertions.assertEquals(board.get().getBid(), newBoard.getBid());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> 게시글_저장() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> <span class="string">&quot;titleTest&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;contentTest&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        <span class="type">Board</span> <span class="variable">savedBoard</span> <span class="operator">=</span> boardRepository.save(Board.builder()</span><br><span class="line">                                                    .title(title)</span><br><span class="line">                                                    .content(content)</span><br><span class="line">                                                    .build());</span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        <span class="type">Board</span> <span class="variable">board</span> <span class="operator">=</span> boardRepository.findById(savedBoard.getBid()).orElseThrow();</span><br><span class="line"></span><br><span class="line">        Assertions.assertEquals(board.getTitle(), title);</span><br><span class="line">        Assertions.assertEquals(board.getContent(), content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> 게시글_수정() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">bid</span> <span class="operator">=</span> newBoard.getBid();</span><br><span class="line">        <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> <span class="string">&quot;testTitle2&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;testContent2&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        <span class="type">Board</span> <span class="variable">updatedBoard</span> <span class="operator">=</span> boardRepository.save(Board.builder()</span><br><span class="line">                                                    .bid(bid)</span><br><span class="line">                                                    .title(title)</span><br><span class="line">                                                    .content(content)</span><br><span class="line">                                                    .build());</span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        <span class="type">Board</span> <span class="variable">board</span> <span class="operator">=</span> boardRepository.findById(updatedBoard.getBid()).orElseThrow();</span><br><span class="line"></span><br><span class="line">        Assertions.assertEquals(newBoard.getBid(), board.getBid());</span><br><span class="line">        Assertions.assertEquals(board.getTitle(), title);</span><br><span class="line">        Assertions.assertEquals(board.getContent(), content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> 게시글_삭제() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">bid</span> <span class="operator">=</span> newBoard.getBid();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        boardRepository.deleteById(bid);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">deletedCount</span> <span class="operator">=</span> boardRepository.count();</span><br><span class="line"></span><br><span class="line">        Assertions.assertEquals(deletedCount, boardCount);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@AutoConfigureTestDatabase(replace &#x3D; AutoConfigureTestDatabase.Replace.NONE) 선언으로 외장 DB를 쓰게 선언한다.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/01/07/Spring/spring-board-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/07/Spring/spring-board-2/" class="post-title-link" itemprop="url">[SPRING] SPRING BOOT + REST API + JPA 게시판(2) - Entity</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2023-01-07 18:30:38" itemprop="dateCreated datePublished" datetime="2023-01-07T18:30:38+09:00">2023-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2023-01-12 18:31:04" itemprop="dateModified" datetime="2023-01-12T18:31:04+09:00">2023-01-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h2><p>Jpa에서 Entity 형태로 된 데이터를 관리해 줄 수 있다.</p>
<p>게시판에 생성, 수정일자가 자동으로 생성되기 위하여 JpaAuditing 기능을 사용했다.</p>
<p>BasTimeEntity를 생성해서 자동으로 관리해주도록 하였다.</p>
<h3 id="JpaAuditing"><a href="#JpaAuditing" class="headerlink" title="JpaAuditing"></a>JpaAuditing</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@MappedSuperclass</span></span><br><span class="line"><span class="meta">@EntityListeners(AuditingEntityListener.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseTimeEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CreatedDate</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createDate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@LastModifiedDate</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime lastModifiedDate;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>@CreatedBy, @LastModifiedBy 으로 생성자, 수정자를 저장 할 수 있지만 아직 로그인 부분을 구현하지 않았기 때문에 구현이 되면 그때 추가하도록하자</p>
</blockquote>
<h3 id="Entity-생성"><a href="#Entity-생성" class="headerlink" title="Entity 생성"></a>Entity 생성</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Board</span> <span class="keyword">extends</span> <span class="title class_">BaseTimeEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long bid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(nullable = false)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span></span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Builder</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Board</span><span class="params">(Long bid, String title, String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bid = bid;</span><br><span class="line">        <span class="built_in">this</span>.title = title;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://qzce.github.io/2023/01/07/Spring/spring-board-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/coffeebook.jpg">
      <meta itemprop="name" content="qzce">
      <meta itemprop="description" content="run">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qzce 개발블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/07/Spring/spring-board-1/" class="post-title-link" itemprop="url">[SPRING] SPRING BOOT + REST API + JPA 게시판(1) - 구성</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>
              

              <time title="Post created: 2023-01-07 18:00:39 / Updated at: 19:49:40" itemprop="dateCreated datePublished" datetime="2023-01-07T18:00:39+09:00">2023-01-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="개요"><a href="#개요" class="headerlink" title="개요"></a>개요</h2><ul>
<li>여러 프로젝트를 위한 기본적인 게시판 시스템 구축하기 위함</li>
</ul>
<h2 id="개발환경-및-세팅"><a href="#개발환경-및-세팅" class="headerlink" title="개발환경 및 세팅"></a>개발환경 및 세팅</h2><ul>
<li>java [OpenJDK 11]</li>
<li>spring boot [ver.(2.7.7)]</li>
<li>mariadb [ver.(10.9.4)]</li>
</ul>
<h3 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a><em>build.gradle</em></h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-data-jpa&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-web&#x27;</span></span><br><span class="line">    compileOnly <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">    runtimeOnly <span class="string">&#x27;org.mariadb.jdbc:mariadb-java-client&#x27;</span></span><br><span class="line">    annotationProcessor <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">    testImplementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-test&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a><em>application.yml</em></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mariadb://localhost:3306/[database</span> <span class="string">name]</span></span><br><span class="line">    <span class="attr">username:</span> [<span class="string">name</span>]</span><br><span class="line">    <span class="attr">password:</span> [<span class="string">password</span>]</span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.mariadb.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><p>Application.java &gt; @SpringBootApplication &gt; 실행</p>
<p>localhost:8080으로 접속</p>
<p><img src="/../../public/images/post/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-01-07%20%EC%98%A4%ED%9B%84%206.38.59.png" alt="image"></p>
<p>해당 화면이 나오면 성공</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="다음 페이지"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="qzce"
      src="/images/coffeebook.jpg">
  <p class="site-author-name" itemprop="name">qzce</p>
  <div class="site-description" itemprop="description">run</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">카테고리</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qzce" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qzce" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qzce</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
